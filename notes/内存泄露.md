## æ½œåœ¨çš„å†…å­˜æ³„éœ²

### å¼•è¨€
ä»€ä¹ˆæ˜¯å†…å­˜æ³„éœ²ï¼Ÿ

ç³»ç»Ÿè¿›ç¨‹ä¸å†ç”¨åˆ°çš„å†…å­˜ï¼Œæ²¡æœ‰åŠæ—¶é‡Šæ”¾ï¼Œå°±å«åš**å†…å­˜æ³„æ¼ï¼ˆmemory leakï¼‰**. å½“å†…å­˜å ç”¨è¶Šæ¥è¶Šé«˜ï¼Œè½»åˆ™å½±å“ç³»ç»Ÿæ€§èƒ½ï¼Œé‡åˆ™å¯¼è‡´è¿›ç¨‹å´©æºƒ. ç«™åœ¨å‰ç«¯çš„è§†è§’.å†™çš„ä¸å¥½çš„ JavaScript å¯èƒ½å‡ºç°éš¾ä»¥å¯Ÿè§‰ä¸”æœ‰å®³çš„å†…å­˜æ³„éœ²é—®é¢˜ï¼š

* ç™½å± / é»‘å±
* å¡é¡¿ / é¡µé¢åŠ è½½è¿Ÿç¼“
* é—ªé€€ / å‘çƒ­
* ğŸ’¥


### å“ªäº›æ“ä½œä¼šé€ æˆå†…å­˜æ³„éœ²

> ä¸€ã€æ„å¤–å£°æ˜å…¨å±€å˜é‡

æ„å¤–å£°æ˜å…¨å±€å˜é‡æ˜¯æœ€å¸¸è§ä½†ä¹Ÿæœ€å®¹æ˜“è§£å†³çš„å†…å­˜æ³„éœ²é—®é¢˜. **åœ¨ windowä¸Šåˆ›å»ºçš„å±æ€§,åªè¦ window æœ¬èº«ä¸è¢«æ¸…é™¤å°±ä¸ä¼šæ¶ˆå¤±. æ— æ³•åšåˆ°æœ‰æ•ˆåœ°é‡Šæ”¾æ¸…é™¤**

1. ä»£ç ç¼–å†™

```javascript
function t(){
   name = 'renlingxin'
}
//name å˜é‡ä¼šæŒ‚åœ¨åˆ°windowä¸Š è€Œwindowä¸Šçš„å˜é‡åœ¨çª—å£å…³é—­æˆ–é‡æ–°åˆ·æ–°é¡µé¢ä¹‹å‰å¹¶ä¸ä¼šé”€æ¯
// ç”¨let const var ä»£æ›¿

```

2. å…¶ä»–æŒ‚è½½

æ’ä»¶\æˆ–ä¸šåŠ¡åœºæ™¯ä¸­æœ‰æ—¶ä¼šé€šè¿‡æŒ‚è½½åˆ° window çš„å±æ€§ å®ç°è¿è¡Œç¯å¢ƒä¸‹ ä¸åŒå·¥ç¨‹ä¹‹é—´åœ°ç›¸äº’é€šä¿¡ ä¾‹å¦‚ 

1. WebView / JavaScript 
2. Cocos / JavaScript
3. SDK - A / SDK - B
4. ...

æˆ‘ä»¬éœ€è¦åˆç†æ­£ç¡®çš„æŒ‚è½½. é¿å…æŒ‚è½½å¤§ä½“ç§¯çš„æ•°æ®.

> äºŒã€é—­åŒ…

```javascript
function d(){
  let name = 'renlingxin'
  return function r(){
    console.log(name)
  }
}
//è¿™ä¼šå¯¼è‡´åˆ†é…ç»™nameçš„å†…å­˜è¢«æ³„éœ².å¦‚æœnameå¾ˆå¤§.å°±ä¼šæ˜¯ä¸€ä¸ªå¤§é—®é¢˜.

```

> ä¸‰ã€å®šæ—¶å™¨(åšåˆ°åŠæ—¶çš„clear)

ä¿æŒè‰¯å¥½çš„ä»£ç ä¹ æƒ¯.

```vue

<template>
 <div>{{ timeDom }}</div>
</template>

<script>
  mounted() {
    this._time = setInterval(() => {
      this.timeDom  = new Date()
    }, 1000);
  },
  // beforeDestroy é”€æ¯ä¹‹å‰çš„å®šæ—¶å™¨
  beforeDestroy() {
    clearInterval(this._time())
  }
</script>

```


> å››ã€äº‹ä»¶ç›‘å¬å™¨(ä¾‹å¦‚vueçš„eventBus)

```vue

import eventBus from './eventBus'

export default {
  mounted() {
    // æ·»åŠ  eventBus ç›‘å¬å™¨
    eventBus.$on('custom-event', () => {
      console.log('Custom event triggered!')
    })
  },
  beforeDestroy() {
    // ç§»é™¤ eventBus ç›‘å¬å™¨
    eventBus.$off('custom-event')
  }
}

```


> äº”ã€å˜é‡å’ŒDomä¹‹é—´åœ°ç›¸äº’å¼•ç”¨(å¯ä»¥ä½¿ç”¨ weakMap / weakSet å»ºç«‹å¼±å¼•ç”¨å…³ç³»)


> å…­ã€consoleï¼ˆæµè§ˆå™¨ä¼šè®°å¿†è¾“å‡ºçš„å˜é‡ã€‚é¿å…åœ¨çº¿ä¸Šç¯å¢ƒæ‰“å°ï¼‰


### è°ƒè¯•

> Performance monitor 

å®æ—¶ç›‘æ§å·¥å…·



>  Memory

å¿«ç…§åŠŸèƒ½


> Performance

æœ€å…¨é¢çš„ç›‘æ§å·¥å…·



